section,heading,xpath,auth_file,auth_section,auth_col,separator,format,comment
metadata,record UID,"for $r in (//tei:additional) return concat($r/ancestor::tei:TEI/tei:teiHeader/tei:fileDesc/tei:publicationStmt/tei:idno[@type=""msID""], ""_record_"", count($r/preceding::tei:additional) + 1)",,,,,text,"A unique identifier for the record, generated by concatenating the identifier given to the manuscript with which the record is associated with a count of how many additioinal elements precede the current element in the entry file."
metadata,file URL,"for $r in (//tei:additional) return string-join($r/ancestor::tei:TEI/@xml:id, """")",,,,,text,"A unique identifier for the catalogue file, given in the xml:id attribute to the TEI root element."
metadata,collection,"for $r in (//tei:additional) return string-join($r/ancestor::tei:TEI/tei:teiHeader/tei:fileDesc/tei:publicationStmt/tei:idno[@type=""collection""][not(@subtype=""alt"")]/string-join(.,""""), "" "")",,,,,text,"The collection in which the manuscript is recorded, given in an idno element within the publicationStmt element which has @type ""collection"" and is not an alternative identifier (and therefore has no @subtype with ""alt"")."
metadata,ms ID,"for $r in (//tei:additional) return string-join($r/ancestor::tei:TEI/tei:teiHeader/tei:fileDesc/tei:publicationStmt/tei:idno[@type=""msID""][not(@subtype=""alt"")]/string-join(.,""""), "" "")",,,,,text,"The identifier given to the manuscript in an idno element within the publicationStmt element which has @type ""msID"" and is not an alternative identifier (and therefore has no @subtype with ""alt"")."
metadata,shelfmark,"for $r in (//tei:additional) return string-join($r/ancestor::tei:TEI/tei:teiHeader/tei:fileDesc/tei:sourceDesc/tei:msDesc/tei:msIdentifier/tei:idno[@type=""shelfmark""][not(@subtype=""alt"")]/string-join(.,""""), "" "")",,,,,text,"The shelfmark given to the manuscript in an idno element within the publicationStmt element which has @type ""shelfmark"" and is not an alternative identifier (and therefore has no @subtype with ""alt"")."
metadata,ms type,"for $r in (//tei:additional) return string-join($r/(ancestor::tei:msPart[not(@type=('fragment','wrapper','flyleaf'))]/('part'), ancestor::tei:msPart[@type=('fragment','wrapper','flyleaf')]/('fragment'), ancestor::tei:msDesc[not(.//tei:msPart)]/('manuscript'), ancestor::tei:msDesc[.//tei:msPart[not(@type=('fragment','wrapper','flyleaf'))]]/('manuscript-composite'), ancestor::tei:msDesc[.//tei:msPart and not(.//tei:msPart[not(@type=('fragment','wrapper','flyleaf'))])]/('manuscript-with-fragment'))[1], "" "")",,,,,text,"Whether the current row concerns a fragment ('fragment'), a manuscript part ('part'), an entire manuscript ('manuscript'), a manuscript containing parts ('manuscript-composite') or a manuscript containing fragments ('manuscript-with-fragment'). "
metadata,part name,"for $r in (//tei:additional) return string-join($r/(ancestor::tei:msPart|ancestor::tei:msDesc)[last()]//tei:idno[@type=""part""][not(@subtype=""alt"")]/string-join(.,""""), "" "")",,,,,text,"The identifier given to the manuscript or manuscript part in an idno element which has @type ""part"" and is not an alternative identifier (and therefore has no @subtype with ""alt"")."
metadata,part ID,"for $r in (//tei:additional) return string-join($r/(ancestor::tei:msPart|ancestor::tei:msDesc)[last()]/@xml:id, "" "")",,,,,text,"The identifier given to the manuscript or manuscript part in an xml:id attribute. If the current row is not for a fragment or a manuscript part, this column will be the same as the metadata: ID column."
metadata,crArk,"for $r in (//tei:additional) return string-join($r/ancestor::tei:TEI/tei:teiHeader/tei:fileDesc/tei:sourceDesc/tei:msDesc/tei:msIdentifier//tei:idno[@type=""crArk""][not(@subtype=""alt"")]/string-join(.,""""), "" "")",,,,,text,"The crArk identifier given to the manuscript in an idno element within the publicationStmt element which has @type ""crArk"" and is not an alternative identifier (and therefore has no @subtype with ""alt"")."
metadata,ieArk,"for $r in (//tei:additional) return string-join($r/ancestor::tei:TEI/tei:teiHeader/tei:fileDesc/tei:sourceDesc/tei:msDesc/tei:msIdentifier//tei:idno[@type=""ieArk""][not(@subtype=""alt"")]/string-join(.,""""), "" "")",,,,,text,"The ieArk identifier given to the manuscript in an idno element within the publicationStmt element which has @type ""ieArk"" and is not an alternative identifier (and therefore has no @subtype with ""alt"")."
metadata,SCN,"for $r in (//tei:additional) return string-join($r/ancestor::tei:TEI/tei:teiHeader/tei:fileDesc/tei:sourceDesc/tei:msDesc/tei:msIdentifier//tei:idno[@type=""SCN""][not(@subtype=""alt"")]/string-join(.,""""), "" "")",,,,,number,"The Summary Catalogue Number given to the manuscript in an idno element within the publicationStmt element which has @type ""SCN"" and is not an alternative identifier (and therefore has no @subtype with ""alt"")."
metadata,TM,"for $r in (//tei:additional) return string-join($r/ancestor::tei:TEI/tei:teiHeader/tei:fileDesc/tei:sourceDesc/tei:msDesc/tei:msIdentifier//tei:idno[@type=""TM""][not(@subtype=""alt"")]/string-join(.,""""), "" "")",,,,,text,"The Trismegistos reference given to the manuscript in an idno element within the publicationStmt element which has @type ""TM"" and is not an alternative identifier (and therefore has no @subtype with ""alt"")."
metadata,PR,"for $r in (//tei:additional) return string-join($r/ancestor::tei:TEI/tei:teiHeader/tei:fileDesc/tei:sourceDesc/tei:msDesc/tei:msIdentifier//tei:idno[@type=""PR""][not(@subtype=""alt"")]/string-join(.,""""), "" "")",,,,,text,"The Papyrological Reference given to the manuscript in an idno element within the publicationStmt element which has @type ""PR"" and is not an alternative identifier (and therefore has no @subtype with ""alt"")."
metadata,diktyon,"for $r in (//tei:additional) return string-join($r/ancestor::tei:TEI/tei:teiHeader/tei:fileDesc/tei:sourceDesc/tei:msDesc/tei:msIdentifier//tei:idno[@type=""diktyon""][not(@subtype=""alt"")]/string-join(.,""""), "" "")",,,,,text,"The Diktyon number given to the manuscript in an idno element within the publicationStmt element which has @type ""diktyon"" and is not an alternative identifier (and therefore has no @subtype with ""alt"")."
record,history,"for $r in (//tei:additional) return normalize-space(string-join($r/tei:adminInfo/tei:recordHist/node()[not(self::tei:bibl)][not(normalize-space(string-join(.,""""))="""")]/string-join(., """"), ""; ""))",,,,,text,"Details of the history of the catalogue record extracted from the recordHist element, excluding bibliographic references."
record,source,"for $r in (//tei:additional) return normalize-space(string-join($r/tei:adminInfo/tei:recordHist//tei:bibl/string-join(., """"), ""; ""))",,,,,text,"Bibliographic references contained in the history of the catalogue record given in the recordHist element, concatenated with a semi-colon where necessary."
record,most recent change,"for $r in (//tei:additional) return string-join($r/ancestor::tei:teiHeader/tei:revisionDesc/tei:change[1]/@when, """")",,,,,date,"The most recent change to the catalogue record, as given in the revisionDesc element."
publisher,institution,"for $r in (//tei:additional) return string-join($r/ancestor::tei:fileDesc/tei:publicationStmt//tei:orgName[@type=""institution""], ""; "")",,,,,text,The institution responsible for the publication of the current manuscript record.
publisher,unit,"for $r in (//tei:additional) return string-join($r/ancestor::tei:fileDesc/tei:publicationStmt//tei:orgName[@type=""unit""], ""; "")",,,,,text,The research or archival unit in the institution responsible for the publication of the current manuscript record.
publisher,department,"for $r in (//tei:additional) return string-join($r/ancestor::tei:fileDesc/tei:publicationStmt//tei:orgName[@type=""department""], ""; "")",,,,,text,The department within the research or archival unit responsible for the publication of the current manuscript record.
location,settlement,"for $r in (//tei:additional) return string-join($r/ancestor::tei:msDesc/tei:msIdentifier//tei:settlement, ""; "")",,,,,text,The settlement (town/city) in which the manuscript is held.
location,institution,"for $r in (//tei:additional) return string-join($r/ancestor::tei:msDesc/tei:msIdentifier//tei:institution, ""; "")",,,,,text,The institution by which the manuscript is held.
location,repository,"for $r in (//tei:additional) return string-join($r/ancestor::tei:msDesc/tei:msIdentifier//tei:repository, ""; "")",,,,,text,The repository in which the manuscript is held.
availability,availability statement,"for $r in (//tei:additional) return normalize-space(string-join($r/tei:adminInfo/tei:availability[not(@status=""restricted"")]/string-join(.,""""), "" ""))",,,,,text,"Information about the availability of the manuscript or manuscript part, as given within the availability element in adminInfo."
surrogates,full digital facsimile(s),"for $r in (//tei:additional) return boolean($r/tei:surrogates//tei:bibl[@subtype=""full""][@type=""digital-facsimile""])",,,,,boolean,"A boolean (true/false) value expressing whether or not a full digital facsimile exists for this manuscript or manuscript part. A value only generally appears for full manuscripts, rather than manuscript parts."
surrogates,full digital facsimile URI(s),"for $r in (//tei:additional) return string-join($r/tei:surrogates//tei:bibl[@subtype=""full""][@type=""digital-facsimile""]/tei:ref/@target, "" "")",,,,,text,"The URI(s) for the full digital facsimile(s) for this manuscript part, if at least one exists."
surrogates,full iiif manifest,"for $r in (//tei:additional) return string-join($r/tei:surrogates//tei:bibl[@subtype=""full""][@type=""digital-facsimile""]/tei:ref/@target[contains(.,""https://digital.bodleian.ox.ac.uk/objects/"")]/concat(replace(replace(.,""/$"",""""),""https://digital\.bodleian\.ox\.ac\.uk/objects/"",""https://iiif.bodleian.ox.ac.uk/iiif/manifest/""), "".json""), "" "")",,,,,text,"The IIIF manifest(s) for the full digital facsimile(s) for this manuscript part, if at least one exists. This cell will only contain a value when the digital facsimile is held by the Bodleian, rather than by an external repository."
surrogates,partial digital facsimile(s),"for $r in (//tei:additional) return boolean($r/tei:surrogates//tei:bibl[@subtype=""partial""][@type=""digital-facsimile""])",,,,,boolean,"A boolean (true/false) value expressing whether or not a partial digital facsimile exists for this manuscript or manuscript part. A value only generally appears for full manuscripts, rather than manuscript parts."
surrogates,partial digital facsimile URI(s),"for $r in (//tei:additional) return string-join($r/tei:surrogates//tei:bibl[@subtype=""partial""][@type=""digital-facsimile""]/tei:ref/@target, "" "")",,,,,text,"The URI(s) for the partial digital facsimile(s) for this manuscript part, if at least one exists."
surrogates,partial iiif manifest,"for $r in (//tei:additional) return string-join($r/tei:surrogates//tei:bibl[@subtype=""partial""][@type=""digital-facsimile""]/tei:ref/@target[contains(.,""https://digital.bodleian.ox.ac.uk/objects/"")]/concat(replace(replace(.,""/$"",""""),""https://digital\.bodleian\.ox\.ac\.uk/objects/"",""https://iiif.bodleian.ox.ac.uk/iiif/manifest/""), "".json""), """")",,,,,text,"The IIIF manifest(s) for the partial digital facsimile(s) for this manuscript part, if at least one exists. This cell will only contain a value when the digital facsimile is held by the Bodleian, rather than by an external repository."
printed resources,bibliography,"for $r in (//tei:additional) return normalize-space(string-join($r/(tei:listBibl[@type=""PRINT"" or @type=""OTHER""]|tei:listBibl/tei:listBibl[@type=""PRINT"" or @type=""OTHER""])//tei:bibl/string-join(., "" ""), ""; ""))",,,,,text,"Printed resources associated with the manuscript or manuscript part within the additional element, with @type either ""PRINT"" or ""OTHER""."
printed resources,URI(s),"for $r in (//tei:additional) return normalize-space(string-join($r/(tei:listBibl[@type=""PRINT"" or @type=""OTHER""]|tei:listBibl/tei:listBibl[@type=""PRINT"" or @type=""OTHER""])//tei:bibl/tei:ref/@target, "" ""))",,,,,text,"URIs for the printed resources associated with the manuscript or manuscript part within the additional element, with @type either ""PRINT"" or ""OTHER""."
printed resources,ID(s),"for $r in (//tei:additional) return normalize-space(string-join($r/(tei:listBibl[@type=""PRINT"" or @type=""OTHER""]|tei:listBibl/tei:listBibl[@type=""PRINT"" or @type=""OTHER""])//tei:bibl/@xml:id, "" ""))",,,,,text,"Identifiers for the printed resources associated with the manuscript or manuscript part within the additional element, with @type either ""PRINT"" or ""OTHER""."
online resources,JONAS URI,"for $r in (//tei:additional) return normalize-space(string-join($r/(tei:listBibl[@type=""INTERNET"" or @type=""WEB"" or @type=""ONLINE""]|tei:listBibl/tei:listBibl[@type=""INTERNET"" or @type=""WEB"" or @type=""ONLINE""])//tei:bibl[contains(.,""JONAS"")]//tei:ref/@target, "" ""))",,,,,text,Entries in the JONAS database associated with the manuscript or manuscript part within the additional element.
online resources,bibliography,"for $r in (//tei:additional) return normalize-space(string-join($r/(tei:listBibl[@type=""INTERNET"" or @type=""WEB"" or @type=""ONLINE""]|tei:listBibl/tei:listBibl[@type=""INTERNET"" or @type=""WEB"" or @type=""ONLINE""])//tei:bibl[not(contains(.,""JONAS""))]/string-join(., "" ""), ""; ""))",,,,,text,"Other online resources associated with the manuscript or manuscript part within the additional element, with @type either ""WEB"" or ""ONLINE""."
online resources,URI(s),"for $r in (//tei:additional) return normalize-space(string-join($r/(tei:listBibl[@type=""INTERNET"" or @type=""WEB"" or @type=""ONLINE""]|tei:listBibl/tei:listBibl[@type=""INTERNET"" or @type=""WEB"" or @type=""ONLINE""])//tei:bibl[not(contains(.,""JONAS""))]//tei:ref/@target, "" ""))",,,,,text,"URIs for the other online resources associated with the manuscript or manuscript part within the additional element, with @type either ""WEB"" or ""ONLINE""."